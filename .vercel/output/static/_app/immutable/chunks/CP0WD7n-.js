import{S as Be,i as Fe,s as Ne,n as Kt,d as n,b as s,w as Qt,e as l,v as i,h as p,f as Wt,x as Zt,j as a,k as o,H as Dt}from"./BJ9OYGg-.js";import"./IHki7fMi.js";function Ke(ze){let c,Jt="最近一段时间都在学 React。作为作业，用 Gatsby 搭建了一个新的个人主页。打算陆续从 Typlog 上搬运过来旧的日记，还有实践一些简单的前端页面。",Y,u,Xt="为什么不继续使用 Typlog 呢？",$,k,Yt="我觉得 Typlog 很好，后台功能也很完善。但我觉得 Typlog 渲染 Markdown 出来的样式不够好看。可能就是自己觉得不够好看吧。",tt,v,$t="除此之外就是一些小细节了，例如：想在文章中间插入一张图片的时候，图片的宽度想等于文字的宽度，得选择某一个固定的模板才可以；文章的头图的宽度也不能设置成和段落等宽，被拉伸后的头图感觉很不好看。",et,x,te="还有一个原因是今年 Typlog 的几个小改动：",nt,C,ee="<li>老用户的套餐变更，不能随意增加自己的站点了；</li> <li>原本的 <code>.com</code> 域名变动，变成了 <code>.io</code> 域名。</li>",st,r,ne="虽然小明也提前在 Telegram group 里做了预告，但我还是感觉到，自己的个人主页这样被不稳定因素影响，还是挺被动的。",lt,f,se="我想自己做一个主页来 host 一些 Markdown 文件，把控制权掌握在自己手里。",at,d,le="细节",pt,m,ae="要自己从零开始搭一个个人主页，感觉还有很多的细节需要考虑。Gatsby 不是类似 Hexo 那样的博客框架，虽然也有提供一些成熟的 blog starter，但如果打算 build from scratch、把它当成我自己的一个网站项目来做，还是有很多事情要做。比如现在我就在想，怎么做 paging；怎么做 tag 索引；怎么加上 GA……一些 Hexo 里头开箱即用的功能，得搜索一下再手动加上。",ot,_,pe="但我觉得应该不会是太大的问题。最近经常有一种迷之自信，总感觉一般只要不是太难的问题，Google 一下都可以搜到答案。如果不自己动手做这个项目，反而失去了 <code>去了解自己未知的东西</code> 的机会。",it,y,oe="下面记录自己遇到的问题，以及解决的方案：",ct,T,ie="客制化代码高亮",ut,H,ce="我预感自己发布的内容里会出现不少的代码片段。Gatsby 提供了 <code>dangerouslySetInnerHTML</code> 的内容来放置 Markdown 转换出来的 html，但里面的一些内容没有经过样式调整，显得非常朴素。",kt,w,ue='要实现代码高亮很简单，搜了一下一般都是通过插件来做的。Gatsby 的插件市场里搜索 <code>code hight</code> 就可以找到非常多的插件。我挑了<a href="https://www.gatsbyjs.org/packages/gatsby-remark-vscode/?=highlight" rel="nofollow">这个</a>，高亮的样式跟 VS Code 是一样的。',vt,b,ke="区分开 inline code",xt,M,ve=`上面这一步可以让 Markdown 中 block 样式的代码块有高亮的效果。但在文本中的 <code>inline code</code> 的效果不是很好，我想自己写 CSS 装饰一下。看了一下渲染之后的 dom 内容，发现其实都是 <code>&lt;code&gt;</code> 标签包裹起来的内容。
如果直接对 <code>&lt;code&gt;</code> 进行装饰，可能就会同时影响到 inline 和 code block 的样式了。`,Ct,L,xe="再观察了一下，发现 block 样式的 <code>&lt;code&gt;</code> 还有一个 class 是 <code>grvsc-code</code>。",rt,P,Ce='<img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gdqwuibnabj32540rgdpl.jpg"/>',ft,h,re="所以只要保证 <code>选中 grvsc-code 之外的其他 code 标签</code> 就可以了。css 里的选择器可以这么写：",dt,S,mt,Ue=`<code class="language-css"><span class="token selector">code:not(.grvsc-code)</span> <span class="token punctuation">&#123;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0.2em 0.4em<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>27<span class="token punctuation">,</span> 31<span class="token punctuation">,</span> 35<span class="token punctuation">,</span> 0.05<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`,_t,j,fe="分页",yt,g,de='参考了 Gatsby 的这个<a href="https://www.gatsbyjs.org/docs/adding-pagination/" rel="nofollow">文档</a>，做了一些小改动。文档里主要有两件事：',Tt,q,me="<li>新增一个 <code>blog-list-template</code> 的模板，用来放置分页后每一页的视图；</li> <li>在 <code>gatsby-node</code> 里新增 <code>createPage</code> 方法，根据 <code>blog-list-template</code> 提供的模板，还有本地的 Markdown 文件数量，渲染出来分页的页面。</li>",Ht,G,_e="我稍微修改了一下文档里 <code>blog-list-template</code> 的代码，变成了下面这样：",wt,R,bt,Ve=`<code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> graphql <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>
<span class="token keyword">import</span> Container <span class="token keyword">from</span> <span class="token string">"../components/container"</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> data <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> posts <span class="token operator">=</span> data<span class="token punctuation">.</span>allMarkdownRemark<span class="token punctuation">.</span>edges
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Container<span class="token operator">></span>
      <span class="token punctuation">&#123;</span>posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> node <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> title <span class="token operator">=</span> node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title <span class="token operator">||</span> node<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">&#123;</span>node<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug<span class="token punctuation">&#125;</span><span class="token operator">></span><span class="token punctuation">&#123;</span>title<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// graphql 的部分省略</span></code>`,Mt,E,ye="移动端适配(响应式)",Lt,I,Te='不熟悉前端怎么实现响应式，搜索了一下，关键字是 mediaquery 确定下来几个尺寸的 breakpoint，再根据不同的尺寸写对应的 CSS。也有主打响应式的 CSS 框架，比如 <a href="https://bulma.io/" rel="nofollow">Bulma</a>。',Pt,O,He="我思考了一下，觉得自己目前并不需要为了这件事专门引入一个 CSS 的模块。再搜了一下 emotion 的文档，简单地在我的容器 container 里头写了尺寸小于 700px 时，宽度为 80%。后面再看情况调整其他的地方吧。",ht,z,we="Google Analytics",St,U,be="搜索了一下有做好的 Gatsby plugin。直接加上了。另外搜到了有人做的 Google Analytics 的 Telegram bot，所以也在 Telegram 上添加了一下这个 bot 的授权。",jt,V,Me="Telegram Instant View",gt,A,Le=`要让自己的 link 在 Telegram 里头实现 Instant View，需要在 Telegram 里提交适配了自己页面的 template，告诉 Telegram 应该如何处理我的链接。
我提交了自己的模板。内容比较少，只要能拿到 body 和 title 告诉 Telegram 即可；但没办法立刻能生效，需要提交至少 10 个 link 可以应用这个模板的才行。`,qt,B,Pe="后面继续搬运旧 blog 过来，再逐步添加吧。",Gt,F,he="RSS",Rt,N,Se='已经支持了。装了 <code>gatsby-plugin-feed</code> 这个插件，再在 config 里配置了一下就好了。地址在<a href="https://yifen.me/rss.xml" rel="nofollow">这里</a>。',Et,K,je="苹方字体",It,Q,ge="在全局的 <code>global.css</code> 里加上了这个字体设置：",Ot,W,zt,Ae=`<code class="language-css"><span class="token selector">body</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> -apple-system<span class="token punctuation">,</span> BlinkMacSystemFont<span class="token punctuation">,</span> <span class="token string">"Segoe UI"</span><span class="token punctuation">,</span> Roboto<span class="token punctuation">,</span> Oxygen<span class="token punctuation">,</span>
    Ubuntu<span class="token punctuation">,</span> Cantarell<span class="token punctuation">,</span> <span class="token string">"Open Sans"</span><span class="token punctuation">,</span> <span class="token string">"Helvetica Neue"</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code>`,Ut,Z,qe="感谢朋友胡椒君~ 另外发现 VS Code 会补全这个 font-family，真方便。",Vt,At,Bt,D,Ge="Todo:",Ft,J,Re="<li>Tag 索引</li> <li>旧 Markdown 文件图片迁移</li> <li>加一个 blog.yifen.me 的二级域名</li>",Nt,X,Ee="<p>*more content still WIP</p>";return{c(){c=a("p"),c.textContent=Jt,Y=o(),u=a("h3"),u.textContent=Xt,$=o(),k=a("p"),k.textContent=Yt,tt=o(),v=a("p"),v.textContent=$t,et=o(),x=a("p"),x.textContent=te,nt=o(),C=a("ol"),C.innerHTML=ee,st=o(),r=a("p"),r.textContent=ne,lt=o(),f=a("p"),f.textContent=se,at=o(),d=a("h3"),d.textContent=le,pt=o(),m=a("p"),m.textContent=ae,ot=o(),_=a("p"),_.innerHTML=pe,it=o(),y=a("p"),y.textContent=oe,ct=o(),T=a("h4"),T.textContent=ie,ut=o(),H=a("p"),H.innerHTML=ce,kt=o(),w=a("p"),w.innerHTML=ue,vt=o(),b=a("h4"),b.textContent=ke,xt=o(),M=a("p"),M.innerHTML=ve,Ct=o(),L=a("p"),L.innerHTML=xe,rt=o(),P=a("p"),P.innerHTML=Ce,ft=o(),h=a("p"),h.innerHTML=re,dt=o(),S=a("pre"),mt=new Dt(!1),_t=o(),j=a("h4"),j.textContent=fe,yt=o(),g=a("p"),g.innerHTML=de,Tt=o(),q=a("ol"),q.innerHTML=me,Ht=o(),G=a("p"),G.innerHTML=_e,wt=o(),R=a("pre"),bt=new Dt(!1),Mt=o(),E=a("h4"),E.textContent=ye,Lt=o(),I=a("p"),I.innerHTML=Te,Pt=o(),O=a("p"),O.textContent=He,ht=o(),z=a("h4"),z.textContent=we,St=o(),U=a("p"),U.textContent=be,jt=o(),V=a("h4"),V.textContent=Me,gt=o(),A=a("p"),A.textContent=Le,qt=o(),B=a("p"),B.textContent=Pe,Gt=o(),F=a("h4"),F.textContent=he,Rt=o(),N=a("p"),N.innerHTML=Se,Et=o(),K=a("h4"),K.textContent=je,It=o(),Q=a("p"),Q.innerHTML=ge,Ot=o(),W=a("pre"),zt=new Dt(!1),Ut=o(),Z=a("p"),Z.textContent=qe,Vt=o(),At=a("hr"),Bt=o(),D=a("p"),D.textContent=Ge,Ft=o(),J=a("ul"),J.innerHTML=Re,Nt=o(),X=a("blockquote"),X.innerHTML=Ee,this.h()},l(t){c=l(t,"P",{"data-svelte-h":!0}),i(c)!=="svelte-1lwxcri"&&(c.textContent=Jt),Y=p(t),u=l(t,"H3",{"data-svelte-h":!0}),i(u)!=="svelte-5jmh96"&&(u.textContent=Xt),$=p(t),k=l(t,"P",{"data-svelte-h":!0}),i(k)!=="svelte-zyh1wh"&&(k.textContent=Yt),tt=p(t),v=l(t,"P",{"data-svelte-h":!0}),i(v)!=="svelte-1yspgm0"&&(v.textContent=$t),et=p(t),x=l(t,"P",{"data-svelte-h":!0}),i(x)!=="svelte-47eh4y"&&(x.textContent=te),nt=p(t),C=l(t,"OL",{"data-svelte-h":!0}),i(C)!=="svelte-408j7h"&&(C.innerHTML=ee),st=p(t),r=l(t,"P",{"data-svelte-h":!0}),i(r)!=="svelte-1lqvzbq"&&(r.textContent=ne),lt=p(t),f=l(t,"P",{"data-svelte-h":!0}),i(f)!=="svelte-1avtppe"&&(f.textContent=se),at=p(t),d=l(t,"H3",{"data-svelte-h":!0}),i(d)!=="svelte-sc2lcw"&&(d.textContent=le),pt=p(t),m=l(t,"P",{"data-svelte-h":!0}),i(m)!=="svelte-1mlpnip"&&(m.textContent=ae),ot=p(t),_=l(t,"P",{"data-svelte-h":!0}),i(_)!=="svelte-1qxu68z"&&(_.innerHTML=pe),it=p(t),y=l(t,"P",{"data-svelte-h":!0}),i(y)!=="svelte-vo17yu"&&(y.textContent=oe),ct=p(t),T=l(t,"H4",{"data-svelte-h":!0}),i(T)!=="svelte-l7sexi"&&(T.textContent=ie),ut=p(t),H=l(t,"P",{"data-svelte-h":!0}),i(H)!=="svelte-1mi1sr8"&&(H.innerHTML=ce),kt=p(t),w=l(t,"P",{"data-svelte-h":!0}),i(w)!=="svelte-12euwaa"&&(w.innerHTML=ue),vt=p(t),b=l(t,"H4",{"data-svelte-h":!0}),i(b)!=="svelte-1v3jds4"&&(b.textContent=ke),xt=p(t),M=l(t,"P",{"data-svelte-h":!0}),i(M)!=="svelte-1mo583v"&&(M.innerHTML=ve),Ct=p(t),L=l(t,"P",{"data-svelte-h":!0}),i(L)!=="svelte-1pd8grc"&&(L.innerHTML=xe),rt=p(t),P=l(t,"P",{"data-svelte-h":!0}),i(P)!=="svelte-18xujh0"&&(P.innerHTML=Ce),ft=p(t),h=l(t,"P",{"data-svelte-h":!0}),i(h)!=="svelte-fopxg5"&&(h.innerHTML=re),dt=p(t),S=l(t,"PRE",{class:!0});var e=Wt(S);mt=Zt(e,!1),e.forEach(n),_t=p(t),j=l(t,"H4",{"data-svelte-h":!0}),i(j)!=="svelte-1w3ethr"&&(j.textContent=fe),yt=p(t),g=l(t,"P",{"data-svelte-h":!0}),i(g)!=="svelte-m6ldtt"&&(g.innerHTML=de),Tt=p(t),q=l(t,"OL",{"data-svelte-h":!0}),i(q)!=="svelte-t4clnv"&&(q.innerHTML=me),Ht=p(t),G=l(t,"P",{"data-svelte-h":!0}),i(G)!=="svelte-p7l0r2"&&(G.innerHTML=_e),wt=p(t),R=l(t,"PRE",{class:!0});var Ie=Wt(R);bt=Zt(Ie,!1),Ie.forEach(n),Mt=p(t),E=l(t,"H4",{"data-svelte-h":!0}),i(E)!=="svelte-1da02j4"&&(E.textContent=ye),Lt=p(t),I=l(t,"P",{"data-svelte-h":!0}),i(I)!=="svelte-2y2jhc"&&(I.innerHTML=Te),Pt=p(t),O=l(t,"P",{"data-svelte-h":!0}),i(O)!=="svelte-13hpvqv"&&(O.textContent=He),ht=p(t),z=l(t,"H4",{"data-svelte-h":!0}),i(z)!=="svelte-uk1uh1"&&(z.textContent=we),St=p(t),U=l(t,"P",{"data-svelte-h":!0}),i(U)!=="svelte-1fftlmd"&&(U.textContent=be),jt=p(t),V=l(t,"H4",{"data-svelte-h":!0}),i(V)!=="svelte-nb9eh3"&&(V.textContent=Me),gt=p(t),A=l(t,"P",{"data-svelte-h":!0}),i(A)!=="svelte-1wt6n3r"&&(A.textContent=Le),qt=p(t),B=l(t,"P",{"data-svelte-h":!0}),i(B)!=="svelte-1f3phkn"&&(B.textContent=Pe),Gt=p(t),F=l(t,"H4",{"data-svelte-h":!0}),i(F)!=="svelte-n1jeqe"&&(F.textContent=he),Rt=p(t),N=l(t,"P",{"data-svelte-h":!0}),i(N)!=="svelte-jjjtz8"&&(N.innerHTML=Se),Et=p(t),K=l(t,"H4",{"data-svelte-h":!0}),i(K)!=="svelte-1wvveu6"&&(K.textContent=je),It=p(t),Q=l(t,"P",{"data-svelte-h":!0}),i(Q)!=="svelte-1ee5mmq"&&(Q.innerHTML=ge),Ot=p(t),W=l(t,"PRE",{class:!0});var Oe=Wt(W);zt=Zt(Oe,!1),Oe.forEach(n),Ut=p(t),Z=l(t,"P",{"data-svelte-h":!0}),i(Z)!=="svelte-1i0hat1"&&(Z.textContent=qe),Vt=p(t),At=l(t,"HR",{}),Bt=p(t),D=l(t,"P",{"data-svelte-h":!0}),i(D)!=="svelte-126c64e"&&(D.textContent=Ge),Ft=p(t),J=l(t,"UL",{"data-svelte-h":!0}),i(J)!=="svelte-pq3eie"&&(J.innerHTML=Re),Nt=p(t),X=l(t,"BLOCKQUOTE",{"data-svelte-h":!0}),i(X)!=="svelte-f1jhqz"&&(X.innerHTML=Ee),this.h()},h(){mt.a=null,Qt(S,"class","language-css"),bt.a=null,Qt(R,"class","language-javascript"),zt.a=null,Qt(W,"class","language-css")},m(t,e){s(t,c,e),s(t,Y,e),s(t,u,e),s(t,$,e),s(t,k,e),s(t,tt,e),s(t,v,e),s(t,et,e),s(t,x,e),s(t,nt,e),s(t,C,e),s(t,st,e),s(t,r,e),s(t,lt,e),s(t,f,e),s(t,at,e),s(t,d,e),s(t,pt,e),s(t,m,e),s(t,ot,e),s(t,_,e),s(t,it,e),s(t,y,e),s(t,ct,e),s(t,T,e),s(t,ut,e),s(t,H,e),s(t,kt,e),s(t,w,e),s(t,vt,e),s(t,b,e),s(t,xt,e),s(t,M,e),s(t,Ct,e),s(t,L,e),s(t,rt,e),s(t,P,e),s(t,ft,e),s(t,h,e),s(t,dt,e),s(t,S,e),mt.m(Ue,S),s(t,_t,e),s(t,j,e),s(t,yt,e),s(t,g,e),s(t,Tt,e),s(t,q,e),s(t,Ht,e),s(t,G,e),s(t,wt,e),s(t,R,e),bt.m(Ve,R),s(t,Mt,e),s(t,E,e),s(t,Lt,e),s(t,I,e),s(t,Pt,e),s(t,O,e),s(t,ht,e),s(t,z,e),s(t,St,e),s(t,U,e),s(t,jt,e),s(t,V,e),s(t,gt,e),s(t,A,e),s(t,qt,e),s(t,B,e),s(t,Gt,e),s(t,F,e),s(t,Rt,e),s(t,N,e),s(t,Et,e),s(t,K,e),s(t,It,e),s(t,Q,e),s(t,Ot,e),s(t,W,e),zt.m(Ae,W),s(t,Ut,e),s(t,Z,e),s(t,Vt,e),s(t,At,e),s(t,Bt,e),s(t,D,e),s(t,Ft,e),s(t,J,e),s(t,Nt,e),s(t,X,e)},p:Kt,i:Kt,o:Kt,d(t){t&&(n(c),n(Y),n(u),n($),n(k),n(tt),n(v),n(et),n(x),n(nt),n(C),n(st),n(r),n(lt),n(f),n(at),n(d),n(pt),n(m),n(ot),n(_),n(it),n(y),n(ct),n(T),n(ut),n(H),n(kt),n(w),n(vt),n(b),n(xt),n(M),n(Ct),n(L),n(rt),n(P),n(ft),n(h),n(dt),n(S),n(_t),n(j),n(yt),n(g),n(Tt),n(q),n(Ht),n(G),n(wt),n(R),n(Mt),n(E),n(Lt),n(I),n(Pt),n(O),n(ht),n(z),n(St),n(U),n(jt),n(V),n(gt),n(A),n(qt),n(B),n(Gt),n(F),n(Rt),n(N),n(Et),n(K),n(It),n(Q),n(Ot),n(W),n(Ut),n(Z),n(Vt),n(At),n(Bt),n(D),n(Ft),n(J),n(Nt),n(X))}}}const Qe={title:"搭了一个新的个人网站",date:"2020-04-04",excerpt:"最近一段时间都在学 React。作为作业，用 Gatsby 搭建了一个新的个人主页。打算陆续从 Typlog 上搬运过来旧的日记，还有实践一些简单的前端页面。",tags:["Frondend","Gatsby","Svelte"]},{title:De,date:Je,excerpt:Xe,tags:Ye}=Qe;class $e extends Be{constructor(c){super(),Fe(this,c,null,Ke,Ne,{})}}export{$e as default,Qe as metadata};
